"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("react-native");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=r(e),o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o.apply(this,arguments)};function u(e,t,r){if(r||2===arguments.length)for(var n,o=0,u=t.length;o<u;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}var a,i=function(e){return e.filter((function(e){return!!e.status})).sort((function(e,t){return e.updatedOn>t.updatedOn?1:e===t?0:-1}))},l=function(e,t){return(null==t?void 0:t.length)!==(null==e?void 0:e.length)?t:e},s=function(r){var u=r.layers,a=r.closeLayerByUuid,s=e.useReducer(l,i(u)),c=s[0],f=void 0===c?[]:c,d=s[1];e.useEffect((function(){d(i(u))}),[u]);var p={modal:{alignItems:"center",justifyContent:"center"},default:{},bottom:{justifyContent:"flex-end"}};return n.default.createElement(n.default.Fragment,null,f.map((function(r){var u=r.layerUuid,i=r.component,l=r.orientation,s=void 0===l?"modal":l,c=s&&p[s]?p[s]:p.default;return n.default.createElement(t.View,{key:u,style:o(o({},c),{display:"flex",flexDirection:"column",position:"absolute",top:"0px",right:"0px",bottom:"0px",left:"0px",overflow:"auto",backgroundColor:"transparent"})},n.default.createElement(t.Pressable,{style:{position:"absolute",top:"0px",right:"0px",bottom:"0px",left:"0px",backgroundColor:"rgba(0, 0, 0, 0.5)"},onPress:function(){return u&&a(u)}}),e.cloneElement(i,o(o(o({},i.props),{style:o(o({},i.props.style),{backgroundColor:"#FF0000",position:"relative"})}),r)))})))},c=new Uint8Array(16);function f(){if(!a&&!(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(c)}var d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function p(e){return"string"==typeof e&&d.test(e)}for(var y=[],v=0;v<256;++v)y.push((v+256).toString(16).substr(1));function m(e,t,r){var n=(e=e||{}).random||(e.rng||f)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(y[e[t+0]]+y[e[t+1]]+y[e[t+2]]+y[e[t+3]]+"-"+y[e[t+4]]+y[e[t+5]]+"-"+y[e[t+6]]+y[e[t+7]]+"-"+y[e[t+8]]+y[e[t+9]]+"-"+y[e[t+10]]+y[e[t+11]]+y[e[t+12]]+y[e[t+13]]+y[e[t+14]]+y[e[t+15]]).toLowerCase();if(!p(r))throw TypeError("Stringified UUID is invalid");return r}(n)}var g=e.createContext({layers:[]});exports.LayersProvider=function(t){var r=t.children,o=e.useRef([]),a=e.useState([]),i=a[0],l=a[1],c=e.useCallback((function(e){return void 0===e&&(e=""),l(i.filter((function(t){return t.layerUuid!==e})))}),[i]),f=e.useCallback((function(e){return l(i.filter((function(t){return t.name!==e})))}),[i]),d=e.useCallback((function(){return l([])}),[]),p=e.useCallback((function(t,r){var n=t.component,a=t.name,i=t.orientation,s=void 0===i?"full":i,c=m(),f={name:a,layerUuid:c,orientation:s,status:1,updatedOn:Date.now(),component:e.isValidElement(n)&&e.cloneElement(n,{layerUuid:c})};l((function(e){return u(u([],e,!0),[f],!1)})),r&&o.current.push(r)}),[]);e.useEffect((function(){o.current.forEach((function(e){return e()})),o.current=[]}),[i]);var y=e.useMemo((function(){return{layers:i,createLayer:p,closeLayerByUuid:c,closeLayerByName:f,closeAllLayers:d}}),[i,p,c,f,d]),v=i.sort((function(e,t){return e.updatedOn<t.updatedOn?-1:e===t?0:1})).filter((function(e){return!!e.status}));return n.default.createElement(g.Provider,{value:y},r,!!(null==v?void 0:v.length)&&n.default.createElement(s,{layers:v,closeLayerByUuid:c}))},exports.useLayer=function(){var t=e.useContext(g);if(void 0===t)throw new Error("useLayer was used outside of its Provider");return t};
//# sourceMappingURL=index.js.map
